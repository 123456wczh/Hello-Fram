# 视觉与特效交互协议 (Visual & Juice Protocol)

> [!NOTE]
> 本协议旨在定义“愉悦感”的技术实现标准。所有的交互都必须具备物理质感与情感反馈。

## 1. 核心视觉支柱 (Visual Pillars)
- **Fluidity (流动性)**：任何位置变化严禁瞬移（Teleport），必须通过插值（Lerp/Tween）平滑过渡。
- **Juice (多汁感)**：动作必须伴随特效。
  - **种植**：尘土飞扬 + 缩放弹动（Scale Bump）。
  - **收割**：碎片爆裂（Particle Burst） + 金币飘字（Floating Text）。
  - **移动**：无人机倾斜（Tilt） + 引擎尾迹。
- **Atmosphere (氛围)**：
  - 全局光照/色调随“日夜循环”或“天气系统”微调（虽然是编程游戏，但要有时间流逝感）。
  - 背景网格带有微弱的呼吸感或扫描光效。

## 2. 特效系统架构 (VFX Architecture)
在 `src/ui/visuals.py` 中实现：
1.  **ParticleSystem**:
    - 支持多种发射模式（爆裂、持续流、环状）。
    - 粒子属性：寿命、重力、阻力、颜色渐变、大小曲线。
2.  **TweenManager**:
    - 提供 `To(target, duration, easing)` 接口。
    - 常用缓动：`EaseOutBack` (弹动), `EaseInOutQuad` (平滑).
3.  **CameraShake**:
    - 在合成大南瓜或代码报错时触发屏幕震动。

## 3. 美术素材需求 (Asset Requirements)
为了替代纯色圆形，我们需要以下素材（支持 `.png` 带透明通道）：

### 作物 (Crops) - 像素风或矢量扁平 (64x64)
- `carrot_stage_1.png` ~ `carrot_stage_4.png` (从发芽到成熟)
- `pumpkin_stage_1...`
- `sunflower_stage_1...`
- `shrub_dead.png` (枯萎/代码错误产物)

### 无人机 (Drone) - (64x64)
- `drone_idle.png` (悬停)
### 特效粒子 (Particles) - (16x16)
- `particle_dirt.png` (泥土颗粒)
- `particle_spark.png` (火花/升级)
- `particle_water.png` (浇水)
- `icon_coin.png` (收益图标)

### 地面 (Tiles) - (64x64)
- `tile_dirt_dry.png`
- `tile_dirt_wet.png`
- `tile_grass.png`

---

**指令确认：**
在实现 `Drone.move()` 时，不再直接修改 `(x, y)`，而是设置 `target_pos`，并在 `update()` 中计算平滑移动。
