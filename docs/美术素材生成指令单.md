# 程序化美术资产生成协议 (Procedural Asset Generation Protocol)

> [!NOTE]
> 本协议取代原有的 AI 生图指令。我们将使用 Python (`pygame.draw`) 实时绘制矢量风格的游戏素材。

## 1. 核心设计语言 (Design Language)
- **几何极简主义 (Geometric Minimalism)**：所有物体由圆形、矩形、圆角矩形和多边形组合而成。
- **无描边 (No Outlines)**：依靠色块明暗差异来表达体积感（Flat Design）。
- **柔和调色板 (Soft Palette)**：避免纯黑纯白，使用 HSL 调整的和谐色。

## 2. Generate API 规范
创建 `src/utils/asset_generator.py`，它不仅负责绘制，还负责**将绘制结果保存为本地 PNG 文件**。

```python
class AssetGenerator:
    ASSET_DIR = "assets"

    @classmethod
    def generate_all(cls):
        """
        1. 检查 assets/ 文件夹是否存在，不存在则创建。
        2. 依次调用绘制函数生成 Surface。
        3. 使用 pygame.image.save() 将结果保存为 standard .png 文件。
        4. (可选) 如果文件已存在，可选择跳过或覆盖。
        """
        pass

    @staticmethod
    def get_carrot(stage: int) -> pygame.Surface:
        # 绘制逻辑...
        return surface
```

## 3. 绘制清单与算法思路

### A. 作物 (Crops) - 64x64
- **胡萝卜 (Carrot)**
  - 身体：橙色倒三角形 (圆角优化)。
  - 叶子：顶部翠绿色椭圆组合。
- **南瓜 (Pumpkin)**
  - 身体：由3-4个重叠的橙色椭圆组成，制造出“分瓣”的体积感。
  - 蒂头：深绿色小矩形。
- **向日葵 (Sunflower)**
  - 花盘：深褐色大圆。
  - 花瓣：围绕圆心旋转绘制一圈黄色小椭圆。
  - **动态**：花盘中心可以随生长进度略微变大。

### B. 无人机 (Drone) - 64x64
- **机身**：白色/青色圆角正方形。
- **旋翼**：四个半透明的灰蓝色圆圈，代表旋转的桨叶。
- **指示灯**：机身中心有一个会呼吸的小光点（表示 AI 运行中）。

### C. 地面与环境 (Environment)
- **Grass Tile**: 纯色绿色背景 + 随机分布的深色小三角形（草叶）。
- **Dirt Tile**: 棕色背景 + 随机分布的深色小噪点。

### D. 特效粒子 (VFX)
- **Dust**: 灰色小圆，Alpha透明度随生命周期递减。
- **Star**: 黄色菱形。

## 4. 优势
- **完全可控**：可以轻易修改配色方案（如一键换成“暗夜霓虹”模式）。
- **无损缩放**：虽然现在是 64x64，但算法可以轻易生成 128x128。
- **程序员美学**：这种由代码构建画面的方式，与游戏主题完美契合。

## 5. 文件输出策略 (File Export Strategy)
为了保证素材可复用且方便预览：
- **输出目录**：项目根目录下的 `assets/` 文件夹。
- **命名规范**：`{category}_{name}_{state}.png` (例如: `crop_carrot_stage4.png`).
- **生成时机**：
  - 游戏启动时检测：如果 `assets/` 为空，自动运行生成。
  - 开发者强制重绘：运行 `python src/utils/asset_generator.py --force`。

